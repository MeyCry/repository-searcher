import {SET_REPOSITORIES_RESULT} from '../actions/search-query.actions';
import {AnyAction} from 'redux';
import RepositoryModel from '../../helpers/repositoryModel';

type State = {
    repositories: Array<RepositoryModel>;
    totalCount: number;
    pages: number;
    currentPage: number;
}
const defaultState: State = {
    repositories: [],
    // repositories: JSON.parse('[{"id":149486541,"name":"web-extension-messenger","fullName":"MeyCry/web-extension-messenger","created_at":"2018-09-19T17:20:06Z","language":"JavaScript","url":"https://api.github.com/repos/MeyCry/web-extension-messenger","watchers":2,"forks":4,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":2},{"id":32221019,"name":"rectangle-meycry","fullName":"MeyCry/rectangle-meycry","created_at":"2015-03-14T16:29:26Z","language":"CoffeeScript","url":"https://api.github.com/repos/MeyCry/rectangle-meycry","watchers":0,"forks":0,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0},{"id":87404016,"name":"meycry-webpack-template-3.0","fullName":"MeyCry/meycry-webpack-template-3.0","created_at":"2017-04-06T08:14:43Z","language":"JavaScript","url":"https://api.github.com/repos/MeyCry/meycry-webpack-template-3.0","watchers":0,"forks":1,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0},{"id":154467548,"name":"ZeoIntranet","fullName":"MeyCry/ZeoIntranet","created_at":"2018-10-24T08:41:13Z","language":null,"url":"https://api.github.com/repos/MeyCry/ZeoIntranet","watchers":0,"forks":0,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0},{"id":31143736,"name":"calculator","fullName":"MeyCry/calculator","created_at":"2015-02-21T22:32:32Z","language":"JavaScript","url":"https://api.github.com/repos/MeyCry/calculator","watchers":0,"forks":0,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0},{"id":38389436,"name":"reactNativeGitHubUsers","fullName":"MeyCry/reactNativeGitHubUsers","created_at":"2015-07-01T19:01:56Z","language":"JavaScript","url":"https://api.github.com/repos/MeyCry/reactNativeGitHubUsers","watchers":0,"forks":0,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0},{"id":220262255,"name":"LearnaTest","fullName":"MeyCry/LearnaTest","created_at":"2019-11-07T14:59:26Z","language":"JavaScript","url":"https://api.github.com/repos/MeyCry/LearnaTest","watchers":0,"forks":0,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0},{"id":233210391,"name":"algoritms","fullName":"MeyCry/algoritms","created_at":"2020-01-11T09:56:42Z","language":"JavaScript","url":"https://api.github.com/repos/MeyCry/algoritms","watchers":0,"forks":0,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0},{"id":26259083,"name":"svift-todo","fullName":"MeyCry/svift-todo","created_at":"2014-11-06T07:32:54Z","language":"Swift","url":"https://api.github.com/repos/MeyCry/svift-todo","watchers":0,"forks":0,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0},{"id":44316684,"name":"simple-template","fullName":"MeyCry/simple-template","created_at":"2015-10-15T12:44:27Z","language":"HTML","url":"https://api.github.com/repos/MeyCry/simple-template","watchers":0,"forks":0,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0},{"id":54844743,"name":"clojure-game","fullName":"MeyCry/clojure-game","created_at":"2016-03-27T19:32:20Z","language":"Clojure","url":"https://api.github.com/repos/MeyCry/clojure-game","watchers":0,"forks":0,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0},{"id":37661128,"name":"legenda-v-pink","fullName":"MeyCry/legenda-v-pink","created_at":"2015-06-18T13:29:48Z","language":"CSS","url":"https://api.github.com/repos/MeyCry/legenda-v-pink","watchers":0,"forks":0,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0},{"id":233108512,"name":"learn-to-mern","fullName":"MeyCry/learn-to-mern","created_at":"2020-01-10T18:36:26Z","language":"JavaScript","url":"https://api.github.com/repos/MeyCry/learn-to-mern","watchers":0,"forks":0,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0},{"id":44315098,"name":"flux-template","fullName":"MeyCry/flux-template","created_at":"2015-10-15T12:13:03Z","language":"JavaScript","url":"https://api.github.com/repos/MeyCry/flux-template","watchers":0,"forks":0,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0},{"id":33859968,"name":"flux-investigation","fullName":"MeyCry/flux-investigation","created_at":"2015-04-13T09:35:18Z","language":"CoffeeScript","url":"https://api.github.com/repos/MeyCry/flux-investigation","watchers":0,"forks":0,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0},{"id":30668157,"name":"springboard-html","fullName":"MeyCry/springboard-html","created_at":"2015-02-11T20:28:27Z","language":"CSS","url":"https://api.github.com/repos/MeyCry/springboard-html","watchers":0,"forks":0,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0},{"id":236059049,"name":"repository-searcher","fullName":"MeyCry/repository-searcher","created_at":"2020-01-24T18:26:03Z","language":"TypeScript","url":"https://api.github.com/repos/MeyCry/repository-searcher","watchers":0,"forks":0,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0},{"id":32397348,"name":"random-folder-and-image-js","fullName":"MeyCry/random-folder-and-image-js","created_at":"2015-03-17T14:11:55Z","language":"CoffeeScript","url":"https://api.github.com/repos/MeyCry/random-folder-and-image-js","watchers":0,"forks":0,"userName":"MeyCry","avatarUrl":"https://avatars2.githubusercontent.com/u/2639946?v=4","stars":0}]'),
    totalCount: 0,
    pages: 50,
    currentPage: 25,
};

export default (state: State = defaultState, action: AnyAction) => {
    switch (action.type) {
        case SET_REPOSITORIES_RESULT:
            return {
                repositories: action.payload.items,
                totalCount: action.payload.totalCount,
                pages: Math.ceil(action.payload.totalCount / 30),
                currentPage: action.payload.currentPage
            };

        default:
            return state;
    }
}
